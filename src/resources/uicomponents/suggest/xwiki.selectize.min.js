/*
 #set ($paths = {
  'selectize': $services.webjars.url('org.webjars:selectize.js', 'js/standalone/selectize.min')
})
#set ($l10n = {
  'selectTypedText': $services.localization.render('web.uicomponents.suggest.selectTypedText', ['{0}'])
})
#[[*/
'use strict';(function(p,q){require.config({paths:p,shim:{selectize:["jquery"]}});define("xwiki-selectize",["jquery","selectize","xwiki-events-bridge"],function(c,f){var h=function(a){var b=c('<div class="xwiki-selectize-option" data-value=""><span class="xwiki-selectize-option-icon" /><span class="xwiki-selectize-option-label" /></div>');b.attr("data-value",a&&"object"===typeof a?a.value:a);var d=a&&a.icon;"object"===typeof d?(!d.iconSetType&&d.url?d.iconSetType="IMAGE":!d.iconSetType&&d.cssClass&&
(d.iconSetType="FONT"),"IMAGE"===d.iconSetType?(d=c('<img class="xwiki-selectize-option-icon" alt="" />').attr("src",d.url),b.find(".xwiki-selectize-option-icon").replaceWith(d)):"FONT"===d.iconSetType?b.find(".xwiki-selectize-option-icon").addClass(d.cssClass):b.find(".xwiki-selectize-option-icon").remove()):b.find(".xwiki-selectize-option-icon").remove();d=a&&a.url;"string"===typeof d&&(d=c('<a class="xwiki-selectize-option-label" />').attr("href",d),b.find(".xwiki-selectize-option-label").replaceWith(d));
a=a&&"object"===typeof a?a.label||a.value:a;b.find(".xwiki-selectize-option-label").text(a);return b},g={copyClassesToDropdown:!1,dropdownParent:"body",highlight:!1,labelField:"label",loadThrottle:500,onDropdownClose:function(a){a.removeClass("active")},onDropdownOpen:function(a){a.addClass("active")},persist:!1,preload:"focus",render:{item:function(a){var b=h(a);a=a&&a.hint;"string"===typeof a&&""!==a&&b.attr("title",a);return b},option:function(a){var b=h(a);b.addClass("option");b.find(".xwiki-selectize-option-icon").wrap('<span class="xwiki-selectize-option-icon-wrapper"/>');
a=a&&a.hint;"string"===typeof a&&""!==a&&b.append(c('<div class="xwiki-selectize-option-hint"/>').text(a));return b},option_create:function(a,b){b=b(q.selectTypedText).replace("{0}","<em/>");b=c('<div class="create option"/>').html(b);b.find("em").text(a.input);return b}},searchField:["value","label","hint"],onType:function(a){a="function"===typeof this.settings.load&&!this.loadedSearches.hasOwnProperty(a);this.get$("wrapper").toggleClass(this.settings.loadingClass,a)},onInitialize:function(){this.get$("control").on("click",
"a.xwiki-selectize-option-label",function(a){a.preventDefault()})}},l=function(){var a=this.selectize,b=a.get$("wrapper");b.addClass(a.settings.loadingClass);a.loading++;a.items.reduce(function(d,e){return d.then(function(){return r(a,e)})},c.Deferred().resolve()).always(function(){a.loading=Math.max(a.loading-1,0);a.loading||b.removeClass(a.settings.loadingClass)})},r=function(a,b){var d=c.Deferred();var e="function"===typeof a.settings.loadSelected?a.settings.loadSelected:a.settings.load;b&&"function"===
typeof e?e.call(a,b,function(m){c.isArray(m)&&m.forEach(function(k){var n=k[a.settings.valueField];a.options.hasOwnProperty(n)?a.updateOption(n,k):a.addOption(k)});d.resolve()}):d.resolve();return d.promise()},u=function(){var a=this.selectize.positionDropdown;this.selectize.positionDropdown=function(){"body"===this.settings.dropdownParent&&a.call(this);"auto"===this.settings.dropdownWidth&&this.get$("dropdown").css({width:"","min-width":this.get$("control")[0].getBoundingClientRect().width})};t(this.selectize);
this.selectize.settings.takeInputWidth&&this.selectize.get$("control").width(c(this).data("initialWidth"));this.selectize.get$("control_input").attr("title",c(this).attr("title"))},t=function(a){var b=a.settings.dropdownAlignment;b||"body"===a.settings.dropdownParent||(b="left");b&&a.get$("dropdown").addClass("selectize-dropdown-"+b)};f.prototype.get$=function(a){return this["$"+a]};var v=function(a){var b={};0===a.closest(".xform").length&&(b.dropdownWidth="auto");return b},w=function(a,b){return c.extend({},
g,v(a),b,a.data("xwiki-selectize"))},x=function(a){var b=c(a).val();null===b&&c(a).attr("multiple")&&(b=[]);a=a.selectize.getValue();return Array.isArray(b)?Array.isArray(a)&&a.length===b.length&&a.every(function(d,e){return d===b[e]}):a===b},y=function(a){var b=a.selectize,d=c(a).val()||[];"string"===typeof d&&(d=d.split(b.settings.delimiter));b.clear(!0);d.forEach(function(e){b.options.hasOwnProperty(e)?b.addItem(e,!0):b.createItem(e,!1)});l.call(a)};c.fn.xwikiSelectize=function(a){this.each(function(){c(this).data("initialWidth",
c(this).width())});return this.not(".selectized, .selectize-control").on("initialize",u).on("change",function(b){x(this)?(b=c(this).closest(".xwiki-livetable-display-header-filter").closest(".xwiki-livetable").attr("id"))&&c(document).trigger("xwiki:livetable:"+b+":filtersChanged"):y(this)}).each(function(){var b=c(this).attr("id");c(this).removeAttr("id");c(this).selectize(w(c(this),a));b&&(this.selectize.get$("control_input").attr("id",b+"-selectized"),c("label").filter(function(){return c(this).attr("for")===
b}).attr("for",b+"-selectized"),c(this).attr("id",b))}).trigger("initialize").each(l)}});require(["jquery","xwiki-selectize","xwiki-events-bridge"],function(c){if(!c.fn.xwikiSelectize.initialized){c.fn.xwikiSelectize.initialized=!0;var f=function(h,g){c(g&&g.elements||document).find(".xwiki-selectize").xwikiSelectize()};c(document).on("xwiki:dom:updated",f);c(f)}})}).apply("]]#",$jsontool.serialize([$paths,$l10n]));

//# sourceMappingURL=xwiki.selectize.min.js.map
