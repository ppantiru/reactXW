/*
 #set ($jsExtension = '.min')
#if (!$services.debug.minify)
  #set ($jsExtension = '')
#end
#set ($paths = {
  'JobRunner': $services.webjars.url('org.xwiki.platform:xwiki-platform-job-webjar', "jobRunner$jsExtension")
})
#set ($l10n = {
  'answering': $services.localization.render('job.question.notification.answering'),
  'canceling': $services.localization.render('job.question.notification.canceling')
})
#[[*/
'use strict';(function(q,h,k){require.config({paths:q});require(["jquery","xwiki-meta","JobRunner"],function(f,r,t){var u=function(a){var b=f(this);b.html(a);b.trigger("job:question:loaded")},v=function(a,b){var c=b.log.items||[],d=a.find(".log");0===b.log.offset&&d.html("");d.find(".log-item-loading").removeClass("log-item-loading");f.each(c,function(e,g){var l=["log-item","log-item-"+g.level];"FINISHED"!==b.state&&e===c.size()-1&&l.push("log-item-loading");f(document.createElement("li")).addClass(l.join(" ")).html(g.renderedMessage).appendTo(d)})},
m=function(a,b){return"function"===typeof a?a.bind(b)():a},x=function(a,b){var c={},d=a.data("job-answer-properties");d?n(c,m(d,a)):w(c,a,b);(b=a.data("job-answer-properties-extra"))&&n(c,m(b,a));return c},n=function(a,b){f.each(b,function(c,d){a["qproperty_"+c]=d})},w=function(a,b,c){b=b.serializeArray();c&&!c.prop("disabled")&&""!==c.attr("name")&&b.push({name:c.attr("name"),value:c.val()});b.each(function(d){var e=a[d.name];e?Array.isArray(e)?e.push(d.value):e=[e,d.value]:e=d.value;a[d.name]=e})},
p=function(a){a.preventDefault();a=f(this);var b=a.parents(".form-question");b.find("btAnswerConfirm").prop("disabled",!0);b.find("btAnswerCancel").prop("disabled",!0);if(b.length){var c=b.parents(".ui-question");if(c.length&&(c=c.data("answerCallback"),"function"===typeof c)){var d=b.data("job-answer-createRequest");if(d)c(d);else{b=x(b,a);d=k.answering;a.hasClass("btAnswerCancel")&&(b.cancel="true",d=k.canceling);var e=new XWiki.widgets.Notification(d,"inprogress");c(b).done(new function(){e.hide()})}}}},
y=function(a,b){var c=f(this);c.find(".ui-progress-background").toggle("NONE"!==a.state);c.find(".ui-progress-message").toggle("NONE"===a.state);"NONE"!==a.state?c.find("#state-none-hint").remove():c.find("#state-none-hint").removeClass("hidden");var d=Math.floor(100*(a.progress.offset||0));c.find(".ui-progress-bar").css("width",d+"%");d=a.log.items||[];0<d.size()&&c.find(".ui-progress-message").html(d[d.size()-1].renderedMessage);d=c.find(".ui-question");if("function"===typeof b){var e=h+"/job/wiki/"+
r.wiki+"/question/"+a.id.join("/");d.data("answerCallback",b);f.ajax(e).done(f.proxy(u,d))}else d.empty();v(c,a)},z=function(a){f(this).find(".ui-progress").replaceWith(a.message)},A=function(){};f(".job-status").has(".ui-progress").each(function(){var a=f(this),b=a.attr("data-url");if(""!==b){var c=a.find(".log"),d={createStatusRequest:function(){return{url:b,data:{logOffset:c.find(".log-item").size()}}}};a=a.find(".ui-question");a.length&&(a.on("click",".btAnswerConfirm",p),a.on("click",".btAnswerCancel",
p),d.createAnswerRequest=function(e,g){return"function"===typeof g?g():{url:h+"/job/question/"+e.join("/"),data:g}});(new t(d)).resume().progress(f.proxy(y,this)).done(f.proxy(z,this)).fail(f.proxy(A,this))}})})}).apply("]]#",$jsontool.serialize([$paths,$request.contextPath,$l10n]));

//# sourceMappingURL=job.min.js.map
