/*
 #set ($l10nKeys = [
  'edit',
  'cancel',
  'save',
  'core.editors.saveandcontinue.notification.inprogress',
  'core.editors.saveandcontinue.notification.done',
  ['core.editors.saveandcontinue.notification.error', '<span id="saveFailureReason"/>'],
  'web.editableProperty.editFailed',
  'web.editableProperty.viewFailed'
])
#set ($l10n = {})
#foreach ($key in $l10nKeys)
  #set ($params = $key.subList(1, $key.size()))
  #if ($params)
    #set ($discard = $l10n.put($key[0], $services.localization.render($key[0], $params)))
  #else
    #set ($discard = $l10n.put($key, $services.localization.render($key)))
  #end
#end
#set ($iconNames = ['pencil', 'cross', 'check'])
#set ($icons = {})
#foreach ($iconName in $iconNames)
  #set ($discard = $icons.put($iconName, $services.icon.renderHTML($iconName)))
#end
#[[*/
'use strict';(function(f,k){define("editableProperty",["jquery","xwiki-meta"],function(b,g){b.fn.editableProperty=function(){return this.each(l)};var l=function(){if(0===b(this).find(".editableProperty-edit").length){var a=b('<a href="#editProperty" class="editableProperty-edit"></a>');a.attr("title",f.edit);a.html(k.pencil);var c=b('<a href="#cancelProperty" class="editableProperty-cancel"></a>');c.attr("title",f.cancel);c.hide().html(k.cross);var d=b('<a href="#saveProperty" class="editableProperty-save"></a>');
d.attr("title",f.save);d.hide().html(k.check);b(this).find("label").after(a,c,d)}a=b(this).next("dd").addClass("editableProperty-viewer");b('<dd class="editableProperty-editor form"/>').hide().insertAfter(a)};b(document).on("click.editProperty",".editableProperty-edit",function(a){a.preventDefault();a=b(this);a.hasClass("disabled")||h(a.closest(".editableProperty"))});b(document).on("click.saveProperty",".editableProperty-save",function(a){a.preventDefault();a=b(this);a.hasClass("disabled")||(a=a.closest(".editableProperty"),
n(a).then(b.proxy(p,null,a)))});b(document).on("click.cancelProperty",".editableProperty-cancel",function(a){a.preventDefault();a=b(this);a.hasClass("disabled")||m(a.closest(".editableProperty"))});var h=function(a){var c=a.find(".editableProperty-edit").addClass("disabled");return b.get(XWiki.currentDocument.getURL("get"),{xpage:"display",mode:"edit",property:a.data("property"),type:a.data("propertyType"),language:g.locale}).done(function(d){c.hide();a.find(".editableProperty-save, .editableProperty-cancel").show();
var e=a.next(".editableProperty-viewer").hide().next(".editableProperty-editor");e.html(d).show();b(document).trigger("xwiki:dom:updated",{elements:e.toArray()});e.find(":input").filter(":visible").focus()}).fail(function(){new XWiki.widgets.Notification(f["web.editableProperty.editFailed"],"error")}).always(function(){c.removeClass("disabled")})},m=function(a){a.next(".editableProperty-viewer").show().next(".editableProperty-editor").filter(":visible").trigger("xwiki:actions:cancel").hide();a.find(".editableProperty-save, .editableProperty-cancel").hide();
a.find(".editableProperty-edit").show()},n=function(a){a.find(".editableProperty-save, .editableProperty-cancel").addClass("disabled");var c=new XWiki.widgets.Notification(f["core.editors.saveandcontinue.notification.inprogress"],"inprogress"),d=a.next(".editableProperty-viewer").next(".editableProperty-editor");d.trigger("xwiki:actions:beforeSave");var e=d.find(":input").serializeArray();e.push({name:"language",value:g.locale});e.push({name:"comment",value:"Update property "+a.data("property")});
e.push({name:"minorEdit",value:!0});e.push({name:"form_token",value:g.form_token});e.push({name:"ajax",value:!0});return b.post(XWiki.currentDocument.getURL("save"),e).done(function(){d.trigger("xwiki:document:saved");c.replace(new XWiki.widgets.Notification(f["core.editors.saveandcontinue.notification.done"],"done"))}).fail(function(q){d.trigger("xwiki:document:saveFailed");c.replace(new XWiki.widgets.Notification(f["core.editors.saveandcontinue.notification.error"],"error"));b("#saveFailureReason").text(q.statusText)}).always(function(){a.find(".editableProperty-save, .editableProperty-cancel").removeClass("disabled")})},
p=function(a){return b.get(XWiki.currentDocument.getURL("get"),{xpage:"display",property:a.data("property"),type:a.data("propertyType"),language:g.locale}).done(function(c){c=a.next(".editableProperty-viewer").html(c);m(a);b(document).trigger("xwiki:dom:updated",{elements:c.toArray()})}).fail(function(){new XWiki.widgets.Notification(f["web.editableProperty.viewFailed"],"error")})}});require(["jquery","editableProperty","xwiki-events-bridge"],function(b){var g=function(l,h){b(h&&h.elements||document).find("dt.editableProperty").editableProperty()};
b(document).on("xwiki:dom:updated",g);b(g)})}).apply("]]#",$jsontool.serialize([$l10n,$icons]));

//# sourceMappingURL=editableProperty.min.js.map
