'use strict';define(["jquery"],function(e){return new function(){var a=this;a.init=function(){var b=e("html");if(void 0!==b.data("xwiki-reference")){a.documentReference=XWiki.Model.resolve(b.data("xwiki-reference"),XWiki.EntityType.DOCUMENT);var c=documentReference.extractReference(XWiki.EntityType.WIKI),d=documentReference.extractReference(XWiki.EntityType.SPACE);a.document=XWiki.Model.serialize(documentReference.relativeTo(c));a.wiki=c.getName();a.space=XWiki.Model.serialize(d.relativeTo(c));a.page=
documentReference.getName();a.version=b.data("xwiki-version");a.restURL=b.data("xwiki-rest-url");a.form_token=b.data("xwiki-form-token");c=b.data("xwiki-user-reference");a.userReference=c?XWiki.Model.resolve(c,XWiki.EntityType.DOCUMENT):null;a.isNew=b.data("xwiki-isnew");a.locale=b.data("xwiki-locale")}else for(b=e("meta"),c="document wiki space page version restURL form_token".split(" "),d=0;d<b.length;++d)for(var g=e(b[d]),h=g.attr("name"),f=0;f<c.length;++f)h==c[f]&&(a[h]=g.attr("content"))};a.setVersion=
function(b){a.version=b;document.fire("xwiki:document:changeVersion",{version:a.version,documentReference:documentReference})};a.refreshVersion=function(b){var c=a.restURL;c+="?media=json&timestamp="+(new Date).getTime();e.getJSON(c).done(function(d){a.setVersion(d.version)}).fail(function(d){404===d.status&&"function"===typeof b?b(d):console.error("Error while refreshing the version from URL "+c,d)})};a.init()}});

//# sourceMappingURL=meta.min.js.map
